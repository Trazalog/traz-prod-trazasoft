<data enableBatchRequests="true" enableBoxcarring="true" name="FRMDataService" transports="http https local">
   <config enableOData="false" id="desarrolloDS">
      <property name="carbon_datasource_name">ToolsDataSource</property>
   </config>
   <query id="getFormularios" useConfig="desarrolloDS">
      <sql>select * from frm.formularios where empr_id = cast(:empr_id as integer)&#xd;and eliminado != 1</sql>
      <result outputType="json">{&#xd;  "formularios": {&#xd;    "formulario": [&#xd;        {&#xd;            "form_id":"$form_id",&#xd;            "nombre":"$nombre",&#xd;            "descripcion":"$descripcion"&#xd;        }&#xd;    ]&#xd;  }&#xd;}</result>
      <param name="empr_id" sqlType="STRING"/>
   </query>
   <query id="getVariablesXOrigen" useConfig="desarrolloDS">
      <sql>select info.variable,  info.valor, info.form_id, info.info_id as info_id&#xd;from tst.origen_tarea_planficada otp,&#xd;tst.tareas_planificadas tp,&#xd;frm.instancias_formularios info&#xd;where otp.origen = :tipo_origen&#xd;and otp.orta_id = cast(:id as integer)&#xd;and otp.tapl_id = tp.tapl_id&#xd;and info.info_id = tp.info_id&#xd;and info.variable is not null</sql>
      <result outputType="json">{&#xd;  "variables": {&#xd;    "variable": [&#xd;        {&#xd;            "variable":"$variable",&#xd;            "valor":"$valor",&#xd;            "info_id":"$info_id",&#xd;            "form_id":"$form_id"&#xd;        }&#xd;    ]&#xd;  }&#xd;}</result>
      <param name="tipo_origen" sqlType="STRING"/>
      <param name="id" sqlType="STRING"/>
   </query>
   <resource method="GET" path="/formularios/{empr_id}">
      <call-query href="getFormularios">
         <with-param name="empr_id" query-param="empr_id"/>
      </call-query>
   </resource>
   <resource method="GET" path="/formularios/etapa/variables/origen/{tipo_origen}/{id}">
      <call-query href="getVariablesXOrigen">
         <with-param name="tipo_origen" query-param="tipo_origen"/>
         <with-param name="id" query-param="id"/>
      </call-query>
   </resource>
</data>
